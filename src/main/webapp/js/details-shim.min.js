/**
 * details-shim.js
 * A pure JavaScript (no dependencies) solution to make HTML5
 *  Details/Summary tags work in unsupportive browsers
 *
 * Copyright (c) 2013 Tyler Uebele
 * Released under the MIT license.  See included LICENSE.txt
 *  or http://opensource.org/licenses/MIT
 *
 * latest version available at https://github.com/tyleruebele/details-shim
 */
function details_shim(e){if(!(e&&"nodeType"in e&&"tagName"in e))return details_shim.init();var t;if("details"==e.tagName.toLowerCase())t=e.getElementsByTagName("summary")[0];else{if(!e.parentNode||"summary"!=e.tagName.toLowerCase())return!1;e=(t=e).parentNode}if("boolean"==typeof e.open)return e.getAttribute("data-open")||(e.className=e.className.replace(/\bdetails_shim_open\b|\bdetails_shim_closed\b/g," ")),!1;var i=e.outerHTML||(new XMLSerializer).serializeToString(e);i=-1!=(i=i.substring(0,i.indexOf(">"))).indexOf("open")&&-1==i.indexOf('open=""')?"open":"closed",e.setAttribute("data-open",i),e.className+=" details_shim_"+i,t.addEventListener?t.addEventListener("click",function(){details_shim.toggle(e)}):t.attachEvent&&t.attachEvent("onclick",function(){details_shim.toggle(e)}),Object.defineProperty(e,"open",{get:function(){return"open"==this.getAttribute("data-open")},set:function(e){details_shim.toggle(this,e)}});for(var a=0;a<e.childNodes.length;a++)if(3==e.childNodes[a].nodeType&&/[^\s]/.test(e.childNodes[a].data)){var s=document.createElement("span"),n=e.childNodes[a];e.insertBefore(s,n),e.removeChild(n),s.appendChild(n)}}details_shim.toggle=function(e,t){t=void 0===t?"open"==e.getAttribute("data-open")?"closed":"open":t?"open":"closed",e.setAttribute("data-open",t),e.className=e.className.replace(/\bdetails_shim_open\b|\bdetails_shim_closed\b/g," ")+" details_shim_"+t},details_shim.init=function(){for(var e=document.getElementsByTagName("summary"),t=0;t<e.length;t++)details_shim(e[t])};