(function(c){c.extend({tablesorter:new function(){function a(b,e){n(b+","+((new Date).getTime()-e.getTime())+"ms")}function n(b){"undefined"!=typeof console&&"undefined"!=typeof console.debug?console.log(b):alert(b)}function h(b,e){if(b.config.debug)var a="";if(0!=b.tBodies.length){var g=b.tBodies[0].rows;if(g[0])for(var d=[],u=g[0].cells.length,k=0;k<u;k++){var l=!1;c.metadata&&c(e[k]).metadata()&&c(e[k]).metadata().sorter?l=p(c(e[k]).metadata().sorter):b.config.headers[k]&&b.config.headers[k].sorter&&
(l=p(b.config.headers[k].sorter));if(!l)a:{for(var l=b,m=g,q=-1,h=k,x=t.length,y=!1,r=!1,v=!0;""==r&&v;)q++,m[q]?(y=m[q].cells[h],r=c.trim(z(l.config,y)),l.config.debug&&n("Checking if value was empty on row:"+q)):v=!1;for(m=1;m<x;m++)if(t[m].is(r,l,y)){l=t[m];break a}l=t[0]}b.config.debug&&(a+="column:"+k+" parser:"+l.id+"\n");d.push(l)}b.config.debug&&n(a);return d}}function p(b){for(var e=t.length,a=0;a<e;a++)if(t[a].id.toLowerCase()==b.toLowerCase())return t[a];return!1}function r(b){if(b.config.debug)var e=
new Date;for(var f=b.tBodies[0]&&b.tBodies[0].rows.length||0,g=b.tBodies[0].rows[0]&&b.tBodies[0].rows[0].cells.length||0,d=b.config.parsers,u={row:[],normalized:[]},k=0;k<f;++k){var l=c(b.tBodies[0].rows[k]),m=[];if(l.hasClass(b.config.cssChildRow))u.row[u.row.length-1]=u.row[u.row.length-1].add(l);else{u.row.push(l);for(var q=0;q<g;++q)m.push(d[q].format(z(b.config,l[0].cells[q]),b,l[0].cells[q]));m.push(u.normalized.length);u.normalized.push(m)}}b.config.debug&&a("Building cache for "+f+" rows:",
e);return u}function z(b,a){var f="";if(!a)return"";b.supportsTextContent||(b.supportsTextContent=a.textContent||!1);return f="simple"==b.textExtraction?b.supportsTextContent?a.textContent:a.childNodes[0]&&a.childNodes[0].hasChildNodes()?a.childNodes[0].innerHTML:a.innerHTML:"function"==typeof b.textExtraction?b.textExtraction(a):c(a).text()}function A(b,e){if(b.config.debug)var f=new Date;for(var g=e.row,d=e.normalized,u=d.length,k=d[0].length-1,l=c(b.tBodies[0]),m=[],q=0;q<u;q++){var n=d[q][k];
m.push(g[n]);if(!b.config.appender)for(var x=g[n].length,h=0;h<x;h++)l[0].appendChild(g[n][h])}b.config.appender&&b.config.appender(b,m);m=null;b.config.debug&&a("Rebuilt table:",f);B(b);setTimeout(function(){c(b).trigger("sortEnd")},0)}function G(b){if(b.config.debug)var e=new Date;var f=H(b);$tableHeaders=c(b.config.selectorHeaders,b).each(function(a){this.column=f[this.parentNode.rowIndex+"-"+this.cellIndex];var e;e=b.config.sortInitialOrder;e="Number"!=typeof e?"desc"==e.toLowerCase()?1:0:1==
e?1:0;this.count=this.order=e;e=c.metadata&&!1===c(this).metadata().sorter?!0:!1;e||(e=b.config.headers[a]&&!1===b.config.headers[a].sorter?!0:!1);e&&(this.sortDisabled=!0);C(b,a)&&(this.order=this.lockedOrder=C(b,a));this.sortDisabled||(e=c(this).addClass(b.config.cssHeader),b.config.onRenderHeader&&b.config.onRenderHeader.apply(e));b.config.headerList[a]=this});b.config.debug&&(a("Built headers:",e),n($tableHeaders));return $tableHeaders}function H(b){var a=[],f={};b=b.getElementsByTagName("THEAD")[0].getElementsByTagName("TR");
for(var g=0;g<b.length;g++)for(var d=b[g].cells,c=0;c<d.length;c++){var k=d[c],l=k.parentNode.rowIndex,m=l+"-"+k.cellIndex,q=k.rowSpan||1,k=k.colSpan||1,n;"undefined"==typeof a[l]&&(a[l]=[]);for(var h=0;h<a[l].length+1;h++)if("undefined"==typeof a[l][h]){n=h;break}f[m]=n;for(h=l;h<l+q;h++){"undefined"==typeof a[h]&&(a[h]=[]);for(var m=a[h],p=n;p<n+k;p++)m[p]="x"}}return f}function C(b,a){return b.config.headers[a]&&b.config.headers[a].lockedOrder?b.config.headers[a].lockedOrder:!1}function B(b){for(var a=
b.config.widgets,f=a.length,c=0;c<f;c++)D(a[c]).format(b)}function D(b){for(var a=v.length,c=0;c<a;c++)if(v[c].id.toLowerCase()==b.toLowerCase())return v[c]}function I(b,a){for(var c=a.length,g=0;g<c;g++)if(a[g][0]==b)return!0;return!1}function E(a,e,f,g){e.removeClass(g[0]).removeClass(g[1]);var d=[];e.each(function(a){this.sortDisabled||(d[this.column]=c(this))});a=f.length;for(e=0;e<a;e++)d[f[e][0]].addClass(g[f[e][1]])}function J(a,e){if(a.config.widthFixed){var f=c("<colgroup>");c("tr:first td",
a.tBodies[0]).each(function(){f.append(c("<col>").css("width",c(this).width()))});c(a).prepend(f)}}function F(b,c,f){if(b.config.debug)var g=new Date;for(var d="var sortWrapper = function(a,b) {",h=c.length,k=0;k<h;k++)var l=c[k][0],m=c[k][1],l="text"==b.config.parsers[l].type?0==m?w("text","asc",l):w("text","desc",l):0==m?w("numeric","asc",l):w("numeric","desc",l),q="e"+k,d=d+("var "+q+" = "+l),d=d+("if("+q+") { return "+q+"; } "),d=d+"else { ";k=f.normalized[0].length-1;d+="return a["+k+"]-b["+
k+"];";for(k=0;k<h;k++)d+="}; ";d+="return 0; }; ";b.config.debug&&a("Evaling expression:"+d,new Date);eval(d);f.normalized.sort(sortWrapper);b.config.debug&&a("Sorting on "+c.toString()+" and dir "+m+" time:",g);return f}function w(a,c,f){var g="a["+f+"]";f="b["+f+"]";if("text"==a&&"asc"==c)return"("+g+" == "+f+" ? 0 : ("+g+" === null ? Number.POSITIVE_INFINITY : ("+f+" === null ? Number.NEGATIVE_INFINITY : ("+g+" < "+f+") ? -1 : 1 )));";if("text"==a&&"desc"==c)return"("+g+" == "+f+" ? 0 : ("+g+
" === null ? Number.POSITIVE_INFINITY : ("+f+" === null ? Number.NEGATIVE_INFINITY : ("+f+" < "+g+") ? -1 : 1 )));";if("numeric"==a&&"asc"==c)return"("+g+" === null && "+f+" === null) ? 0 :("+g+" === null ? Number.POSITIVE_INFINITY : ("+f+" === null ? Number.NEGATIVE_INFINITY : "+g+" - "+f+"));";if("numeric"==a&&"desc"==c)return"("+g+" === null && "+f+" === null) ? 0 :("+g+" === null ? Number.POSITIVE_INFINITY : ("+f+" === null ? Number.NEGATIVE_INFINITY : "+f+" - "+g+"));"}var t=[],v=[];this.defaults=
{cssHeader:"header",cssAsc:"headerSortUp",cssDesc:"headerSortDown",cssChildRow:"expand-child",sortInitialOrder:"asc",sortMultiSortKey:"shiftKey",sortForce:null,sortAppend:null,sortLocaleCompare:!0,textExtraction:"simple",parsers:{},widgets:[],widgetZebra:{css:["even","odd"]},headers:{},widthFixed:!1,cancelSelection:!0,sortList:[],headerList:[],dateFormat:"us",decimal:"/.|,/g",onRenderHeader:null,selectorHeaders:"thead th",debug:!1};this.benchmark=a;this.construct=function(a){return this.each(function(){if(this.tHead&&
this.tBodies){var e,f,g,d;this.config={};d=c.extend(this.config,c.tablesorter.defaults,a);e=c(this);c.data(this,"tablesorter",d);f=G(this);this.config.parsers=h(this,f);g=r(this);var n=[d.cssDesc,d.cssAsc];J(this);f.click(function(a){var b=e[0].tBodies[0]&&e[0].tBodies[0].rows.length||0;if(!this.sortDisabled&&0<b){e.trigger("sortStart");c(this);b=this.column;this.order=this.count++%2;this.lockedOrder&&(this.order=this.lockedOrder);if(a[d.sortMultiSortKey])if(I(b,d.sortList))for(a=0;a<d.sortList.length;a++){var m=
d.sortList[a],h=d.headerList[m[0]];m[0]==b&&(h.count=m[1],h.count++,m[1]=h.count%2)}else d.sortList.push([b,this.order]);else{d.sortList=[];if(null!=d.sortForce)for(m=d.sortForce,a=0;a<m.length;a++)m[a][0]!=b&&d.sortList.push(m[a]);d.sortList.push([b,this.order])}setTimeout(function(){E(e[0],f,d.sortList,n);A(e[0],F(e[0],d.sortList,g))},1);return!1}}).mousedown(function(){if(d.cancelSelection)return this.onselectstart=function(){return!1},!1});e.bind("update",function(){var a=this;setTimeout(function(){a.config.parsers=
h(a,f);g=r(a)},1)}).bind("updateCell",function(a,b){var c=this.config,d=[b.parentNode.rowIndex-1,b.cellIndex];g.normalized[d[0]][d[1]]=c.parsers[d[1]].format(z(c,b),b)}).bind("sorton",function(a,b){c(this).trigger("sortStart");d.sortList=b;for(var e=d.sortList,h=this.config,p=e.length,r=0;r<p;r++){var t=e[r],v=h.headerList[t[0]];v.count=t[1];v.count++}E(this,f,e,n);A(this,F(this,e,g))}).bind("appendCache",function(){A(this,g)}).bind("applyWidgetId",function(a,b){D(b).format(this)}).bind("applyWidgets",
function(){B(this)});c.metadata&&c(this).metadata()&&c(this).metadata().sortlist&&(d.sortList=c(this).metadata().sortlist);0<d.sortList.length&&e.trigger("sorton",[d.sortList]);B(this)}})};this.addParser=function(a){for(var c=t.length,f=!0,g=0;g<c;g++)t[g].id.toLowerCase()==a.id.toLowerCase()&&(f=!1);f&&t.push(a)};this.addWidget=function(a){v.push(a)};this.formatFloat=function(a){a=parseFloat(a);return isNaN(a)?0:a};this.formatInt=function(a){a=parseInt(a);return isNaN(a)?0:a};this.isDigit=function(a,
e){return/^[-+]?\d*$/.test(c.trim(a.replace(/[,.']/g,"")))};this.clearTableBody=function(a){c.browser.msie?function(){for(;this.firstChild;)this.removeChild(this.firstChild)}.apply(a.tBodies[0]):a.tBodies[0].innerHTML=""}}});c.fn.extend({tablesorter:c.tablesorter.construct});var p=c.tablesorter;p.addParser({id:"text",is:function(a){return!0},format:function(a){return c.trim(a.toLocaleLowerCase())},type:"text"});p.addParser({id:"digit",is:function(a,n){return c.tablesorter.isDigit(a,n.config)},format:function(a){return c.tablesorter.formatFloat(a)},
type:"numeric"});p.addParser({id:"currency",is:function(a){return/^[\u00a3$\u20ac?.]/.test(a)},format:function(a){return c.tablesorter.formatFloat(a.replace(new RegExp(/[\u00a3$\u20ac]/g),""))},type:"numeric"});p.addParser({id:"ipAddress",is:function(a){return/^\d{2,3}[\.]\d{2,3}[\.]\d{2,3}[\.]\d{2,3}$/.test(a)},format:function(a){a=a.split(".");for(var n="",h=a.length,p=0;p<h;p++)var r=a[p],n=2==r.length?n+("0"+r):n+r;return c.tablesorter.formatFloat(n)},type:"numeric"});p.addParser({id:"url",is:function(a){return/^(https?|ftp|file):\/\/$/.test(a)},
format:function(a){return jQuery.trim(a.replace(new RegExp(/(https?|ftp|file):\/\//),""))},type:"text"});p.addParser({id:"isoDate",is:function(a){return/^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(a)},format:function(a){return c.tablesorter.formatFloat(""!=a?(new Date(a.replace(new RegExp(/-/g),"/"))).getTime():"0")},type:"numeric"});p.addParser({id:"percent",is:function(a){return/\%$/.test(c.trim(a))},format:function(a){return c.tablesorter.formatFloat(a.replace(new RegExp(/%/g),""))},type:"numeric"});
p.addParser({id:"usLongDate",is:function(a){return a.match(new RegExp(/^[A-Za-z]{3,10}\.? [0-9]{1,2}, ([0-9]{4}|'?[0-9]{2}) (([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(AM|PM)))$/))},format:function(a){return c.tablesorter.formatFloat((new Date(a)).getTime())},type:"numeric"});p.addParser({id:"shortDate",is:function(a){return/\d{1,2}[\/\-]\d{1,2}[\/\-]\d{2,4}/.test(a)},format:function(a,n){var h=n.config;a=a.replace(/\-/g,"/");if("us"==h.dateFormat)a=a.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,
"$3/$1/$2");else if("uk"==h.dateFormat)a=a.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{4})/,"$3/$2/$1");else if("dd/mm/yy"==h.dateFormat||"dd-mm-yy"==h.dateFormat)a=a.replace(/(\d{1,2})[\/\-](\d{1,2})[\/\-](\d{2})/,"$1/$2/$3");return c.tablesorter.formatFloat((new Date(a)).getTime())},type:"numeric"});p.addParser({id:"time",is:function(a){return/^(([0-2]?[0-9]:[0-5][0-9])|([0-1]?[0-9]:[0-5][0-9]\s(am|pm)))$/.test(a)},format:function(a){return c.tablesorter.formatFloat((new Date("2000/01/01 "+a)).getTime())},
type:"numeric"});p.addParser({id:"metadata",is:function(a){return!1},format:function(a,n,h){a=n.config;a=a.parserMetadataName?a.parserMetadataName:"sortValue";return c(h).metadata()[a]},type:"numeric"});p.addWidget({id:"zebra",format:function(a){if(a.config.debug)var n=new Date;var h,p=-1,r;c("tr:visible",a.tBodies[0]).each(function(n){h=c(this);h.hasClass(a.config.cssChildRow)||p++;r=0==p%2;h.removeClass(a.config.widgetZebra.css[r?0:1]).addClass(a.config.widgetZebra.css[r?1:0])});a.config.debug&&
c.tablesorter.benchmark("Applying Zebra widget",n)}})})(jQuery);
