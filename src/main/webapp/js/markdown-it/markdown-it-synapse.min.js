/*! markdown-it-synapse 1.0.5 https://github.com/jay-hodgson/markdown-it-synapse @license MIT */
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var r;r="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,r.markdownitSynapse=e()}}(function(){return function e(r,n,t){function s(i,a){if(!n[i]){if(!r[i]){var u="function"==typeof require&&require;if(!a&&u)return u(i,!0);if(o)return o(i,!0);var p=new Error("Cannot find module '"+i+"'");throw p.code="MODULE_NOT_FOUND",p}var l=n[i]={exports:{}};r[i][0].call(l.exports,function(e){var n=r[i][1][e];return s(n?n:e)},l,l.exports,e,r,n,t)}return n[i].exports}for(var o="function"==typeof require&&require,i=0;i<t.length;i++)s(t[i]);return s}({1:[function(e,r,n){"use strict";function t(e,r){var n,t,s,o,i=null;for(n=e.split("?"),t=n[1].split("&"),s=0;s<t.length;s++)o=t[s].split("="),r===o[0]&&(i=o[1]);return i}function s(e,r){var n,s,f,d,h,k,m=e.posMax,x=e.pos,g="widgetContainer";if(x+3>=m)return!1;if(36!==e.src.charCodeAt(x))return!1;if(123!==e.src.charCodeAt(x+1))return!1;if(r)return!1;for(e.pos=x+2;e.pos<m;){if(125===e.src.charCodeAt(e.pos)){n=!0;break}e.md.inline.skipToken(e)}return n&&x+2!==e.pos?(s=e.src.slice(x+2,e.pos),d=s.replace(p,"$1"),0===s.lastIndexOf(l,0)?(d+="&footnoteId="+a,f=e.push("synapse_reference_open","span",1),f.attrs=[["id","wikiReference"+a]],f=e.push("synapse_reference_close","span",-1),h=decodeURIComponent(d),k=t(h,"text"),k&&(u+="${bookmark?text=["+a+"]&bookmarkID=wikiReference"+a+"} "+k+"\n"),a++,g="inlineWidgetContainer"):0===s.lastIndexOf(c,0)&&(f=e.push("synapse_footnote_target_open","span",1),f.attrs=[["id","wikiFootnote"+a]],f=e.push("synapse_footnote_target_close","span",-1),a++,g="inlineWidgetContainer"),e.posMax=e.pos,e.pos=x+2,f=e.push("synapse_open","span",1),f.markup="${",f.attrs=[["widgetparams",d],["class",g],["id","widget-"+i+o]],f=e.push("synapse_close","span",-1),f.markup="}",e.pos=e.posMax+1,e.posMax=m,i+=1,!0):(e.pos=x,!1)}var o,i,a,u,p=/\\([ \\!"#$%&'()*+,.\/:;<=>?@[\]^_`{|}~-])/g,l="reference?",c="bookmark?",f=new RegExp("^syn([0-9]+[.]?[0-9]*)+"),d=new RegExp("^([\\da-z\\.-]+)\\.([a-z\\.]{2,6})([\\/w \\.-]*)*\\/?.*$"),h=new RegExp("^doi:10[.]{1}[0-9]+[/]{1}[a-zA-Z0-9_.]+$"),k=new RegExp("^\\s*(width[=]{1})?\\s*(.*)[}]{1}\\s*$"),m=new RegExp("^\\s*[*-+>]{1}[^|]*$"),x=new RegExp("^\\s*\\d+\\s*[.)]{1}[^|]*$"),g=new RegExp("[ ]{7}","g"),v=!1;r.exports=function(e,r){i=0,a=1,o=r,u="",v||(e.inline.ruler.after("emphasis","synapse",s),v=!0)},r.exports.footnotes=function(){return u},r.exports.resetFootnoteId=function(){a=1},r.exports.preprocessMarkdown=function(e){for(var r="",n=e.split("\n"),t=!1,s=!1,o=0;o<n.length;o++)s=m.test(n[o])||x.test(n[o]),s&&(n[o]=n[o].replace(g,"    ")),t&&!s&&(r+="\n"),r+=n[o]+"\n",t=s;return r},r.exports.init_markdown_it=function(e,r,n,t,s,o,i,a,u){function p(){var r=e.renderer.rules.link_open||function(e,r,n,t,s){return s.renderToken(e,r,n)};e.renderer.rules.link_open=function(e,n,t,s,o){var i=e[n].attrIndex("target"),a=e[n].attrIndex("href");return 0>i?(0>a||!e[n].attrs[a][1].startsWith("#!"))&&e[n].attrPush(["target","_blank"]):e[n].attrs[i][1]="_blank",r(e,n,t,s,o)}}function l(){var r=e.renderer.rules.table_open||function(e,r,n,t,s){return s.renderToken(e,r,n)};e.renderer.rules.table_open=function(e,n,t,s,o){var i=e[n].attrIndex("class");return 0>i?e[n].attrPush(["class","markdowntable"]):e[n].attrs[i][1]+="markdowntable",r(e,n,t,s,o)}}function c(){e.linkify.set({fuzzyLink:!1}),e.linkify.add("@",{validate:function(e,r,n){var t=e.slice(r);return n.re.username||(n.re.username=new RegExp("^([a-zA-Z0-9_]){1,15}(?!_)(?=$|"+n.re.src_ZPCc+")")),n.re.username.test(t)?r>=2&&"@"===t[r-2]?!1:t.match(n.re.username)[0].length:0},normalize:function(e){e.url="#!Profile:"+e.url.replace(/^@/,"")}}),e.linkify.add("syn",{validate:function(e,r,n){var t=e.slice(r);return n.re.synapse||(n.re.synapse=new RegExp("^([0-9]{3,}[.]?[0-9]*(\\/wiki\\/[0-9]+)?)+(?!_)(?=$|"+n.re.src_ZPCc+")")),n.re.synapse.test(t)?t.match(n.re.synapse)[0].length:0},normalize:function(e){e.url="#!Synapse:"+e.url.replace(/[.]/,"/version/")}}),e.linkify.add("doi:10.",{validate:function(e,r,n){var t=e.slice(r);return n.re.doi||(n.re.doi=new RegExp("^[0-9]+[/]{1}[a-zA-Z0-9_.]+(?!_)(?=$|"+n.re.src_ZPCc+")")),n.re.doi.test(t)?t.match(n.re.doi)[0].length:0},normalize:function(e){e.url="http://dx.doi.org/"+e.url}})}function m(r,n){var t,s,o,i,a,u,p,l,c,k,m="",x=r.pos,g=r.posMax,v=r.pos,_=e.helpers.parseLinkLabel,w=e.helpers.parseLinkDestination,y=e.helpers.parseLinkTitle,C=e.utils.isSpace,b=e.utils.normalizeReference;if(91!==r.src.charCodeAt(r.pos))return!1;if(a=r.pos+1,i=_(r,r.pos,!0),0>i)return!1;if(u=i+1,g>u&&40===r.src.charCodeAt(u)){for(u++;g>u&&(s=r.src.charCodeAt(u),C(s)||10===s);u++);if(u>=g)return!1;if(v=u,p=w(r.src,u,r.posMax),p.ok){var A=p.str;f.test(A)?p.str="#!Synapse:"+A.replace(/[.]/,"/version/"):d.test(A)?p.str="http://"+A:h.test(A)&&(p.str="http://dx.doi.org/"+A),m=r.md.normalizeLink(p.str),r.md.validateLink(m)?u=p.pos:m=""}for(v=u;g>u&&(s=r.src.charCodeAt(u),C(s)||10===s);u++);if(p=y(r.src,u,r.posMax),g>u&&v!==u&&p.ok)for(c=p.str,u=p.pos;g>u&&(s=r.src.charCodeAt(u),C(s)||10===s);u++);else c="";if(u>=g||41!==r.src.charCodeAt(u))return r.pos=x,!1;u++}else{if("undefined"==typeof r.env.references)return!1;if(g>u&&91===r.src.charCodeAt(u)?(v=u+1,u=_(r,u),u>=0?o=r.src.slice(v,u++):u=i+1):u=i+1,o||(o=r.src.slice(a,i)),l=r.env.references[b(o)],!l)return r.pos=x,!1;m=l.href,c=l.title}return n||(r.pos=a,r.posMax=i,k=r.push("link_open","a",1),k.attrs=t=[["href",m]],c&&t.push(["title",c]),r.md.inline.tokenize(r),k=r.push("link_close","a",-1)),r.pos=u,r.posMax=g,!0}function x(e,r,n){for(var t,s,o,i=n,a=r,u=e.charCodeAt(n);a>i&&e.charCodeAt(i)===u;)i++;return t=i-n,s=!0,o=!0,{can_open:s,can_close:o,length:t}}function g(e,r){var n,t,s,o=e.pos,i=e.src.charCodeAt(o);if(r)return!1;if(95!==i&&42!==i)return!1;for(t=x(e.src,e.posMax,e.pos),n=0;n<t.length;n++)s=e.push("text","",0),s.content=String.fromCharCode(i),e.delimiters.push({marker:i,jump:n,token:e.tokens.length-1,level:e.level,end:-1,open:t.can_open,close:t.can_close});return e.pos+=t.length,!0}function v(){e.set({html:!1,breaks:!0,linkify:!0,maxNesting:100}),e.disable(["heading"]),e.disable(["lheading"]),e.use(r).use(n).use(t).use(s).use(o).use(i).use(u),e.use(a,"row",{marker:"{row}",minMarkerCount:1,render:function(e,r){var n;return n=1===e[r].nesting?'<div class="container-fluid"><div class="row">':"</div></div>\n"},validate:function(){return!0}}),e.use(a,"column",{marker:"{column",endMarker:"{column}",minMarkerCount:1,render:function(r,n){var t,s;return 1===r[n].nesting?(t=k.exec(r[n].info),s='<div class="col-sm-'+e.utils.escapeHtml(t[2])+'">'):s="</div>\n",s},validate:function(e){return k.test(e)}}),p(),c(),l(),e.inline.ruler.at("link",m),e.inline.ruler.at("emphasis",g)}v()}},{}]},{},[1])(1)});
